# Ch.7 보조기억장치

## 7.1 다양한 보조기억장치

### 하드 디스크 (HDD; Hard Disk Drive)

- 자기적인 방식으로 데이터를 저장하는 보조기억장치

### 플래시 메모리 (Flash Memory)

- 전기적인 방식으로 데이터를 저장하는 반도체 기반의 저장 장치
- 종류
    - NAND 플래시 메모리
        - NAND 게이트 기반으로 제작
    - NOR 플래시 메모리
        - NOR 게이트 기반으로 제작
- 셀(cell): 플래시 메모리에서 데이터를 저장하는 가장 작은 단위
    - SLC(Single Level Cell) 타입: 한 셀에 1비트를 저장
    - MLC(Multiple Level Cell) 타입: 한 셀에 2비트를 저장
    - TLC(Triple-Level Cell) 타입: 한 셀에 3비트를 저장
    - SLC가 가장 입출력 속도가 빠르고 수명이 길지만, 가장 가격이 높음
- 페이지(page): 셀들이 모여 만들어진 단위
- 블록(block): 페이지가 모여 만들어진 단위
- 플레인(plane): 블록이 모여 만들어진 단위
- 다이(die): 플레인이 모여 만들어진 단위
- **플래시 메모리에서 읽기와 쓰기는 페이지 단위로 이루어지지만 삭제는 블록 단위로 이루어짐**
- 페이지는 Free, Valid, Invalid의 세 가지 상태를 가질 수 있음
    - Free 상태
        - 어떠한 데이터도 저장하고 있지 않아 새로운 데이터를 저장할 수 있는 상태
    - Valid 상태
        - 이미 유효한 데이터를 저장하고 있는 상태
        - 플래시 메모리는 하드 디스크와 달리 덮어쓰기가 불가능하여 Valid 상태인 페이지에는 새 데이터를 저장할 수 없음
    - Invalid 상태
        - 쓰레기값이라 부르는 유효하지 않은 데이터를 저장하고 있는 상태
        - SSD를 비롯한 플래시 메모리는 쓰레기 값을 정리하기 위해 가비지 컬렉션(garbage collection) 기능을 제공
            - 유효한 페이지들만을 새로운 블록으로 복사한 뒤 기존의 블록을 삭제
            
## 7.2 RAID의 정의와 종류

### RAID(Redundant Array of Independent Disks)의 정의

- 데이터의 안전성 혹은 높은 성능을 위해 여러 개의 물리적 보조기억장치를 하나의 논리적 보조기억장치처럼 사용하는 기술

### RAID의 종류

#### RAID 0 (Striping)

- 여러 개의 보조기억장치에 데이터를 단순히 나누어 저장하는 방식
- 데이터는 하드 디스크 개수만큼 나뉘어 저장됨
- 하나의 대용량 저장 장치에서는 여러 번에 걸쳐 읽고 썼을 데이터를 동시에 읽고 쓸 수 있어 속도가 빨라짐
- RAID 0으로 구성된 하드디스크 중 하나에 문제가 생긴다면 다른 모든 하드 디스크의 정보를 읽는 데 문제가 생길 수 있음

#### RAID 1 (Mirroring)

- 데이터 스트라이핑을 사용하지만, 완전히 동일한 내용을 두 하드 디스크에 나누어 보관함
- 하나의 하드 디스크에 문제가 발생해도 잃어버린 정보를 금장 되찾을 수 있어 복구가 매우 간단함
- 사용 가능한 용량이 적어짐

#### RAID 4

- 완전한 복사본을 만드는 대신 오류를 거물하고 복구하기 위한 정보인 패리티 비트(parity bit)를 저장한 장치를 둠
- RAID 1보다 적은 하드 디스크로도 데이터를 안전하게 보관할 수 있음
- 본래 패리티 비트는 오류 검출용 정보지만, RAID에서는 오류 복구도 가능함
- 새로운 데이터가 저장될 때마다 패리티를 저장하는 디스크에도 데이터를 쓰게 되므로 패리티를 저장하는 장치에 병목 현상이 발생할 수 있음

#### RAID 5

- 패리티 정보를 분산하여 저장하는 방식으로 병목 현상을 해소

#### RAID 6

- 서로 다른 두 개의 패리티를 두어 안전성 증가
- 새로운 정보를 저장할 때마다 함께 저장할 패리티가 두 개이므로 쓰기 속도가 RAID 5보다 느림