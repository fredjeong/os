# 11. CPU 스케줄링

## 11.1 CPU 스케줄링 개요

- CPU 스케줄링
    - 운영체제가 프로세스들에게 공정하고 합리적으로 CPU 자원을 분배하는 것

### 프로세스 우선순위

- 입출력 집중 프로세스 (I/O bound process)
    - 입출력 작업이 많은 프로세스
    - 실행 상태보다는 입출력을 위한 대기 상태에 더 많이 머무름
- CPU 집중 프로세스 (CPU bound process)
    - CPU 작업이 많은 프로세스
    - 대기 상태보다는 실행 상태에 더 많이 머무름
- 입출력 집중 프로세스가 더 높은 우선순위를 가짐 (자주 실행되지 않으므로)

### 스케줄링 큐 (Scheduling Queue)

- PCB에 우선순위가 기록되지만 운영체제가 모든 프로세스의 PCB를 조사하는 것은 비효율적임
- 운영체제는 스케줄링 큐에 새로 생성되는 프로세스, CPU 이용을 필요로 하는 프로세스, 입출력장치를 이용해야 하는 프로세스들을 삽입하여 순서를 관리
- 큐의 종류
    - 준비 큐(ready queue)
        - CPU를 이용하고 싶은 프로세스들의 큐
    - 대기 큐(waiting queue)
        - 입출력장치를 이용하기 위해 대기 상태에 접어든 프로세스들의 큐

### 선점형과 비선점형 스케줄링

- 선점형 스케줄링(preemptive scheduling)
    - 프로세스가 CPU를 비롯한 자원을 사용하고 있더라도 운영체제가 자원을 강제로 빼앗아 다른 프로세스에 할당할 수 있는 스케줄링 방식
    - 어느 하나의 프로세스가 자원 사용을 독점할 수 없음
    - 문맥 교환 과정에서 오버헤드가 발생할 수 있음
    - 대부분의 운영체제가 채택하는 방식
- 비선점형 스케줄링(non-preemptive scheduling)
    - 하나의 프로세스가 자원을 사용하고 있다면 그 프로세스가 종료되거나 스스로 대기 상태에 접어들기 전까진 다른 프로세스가 끼어들 수 없는 스케줄링 방식
    - 모든 프로세스가 골고루 자원을 사용할 수 없음

## 11.2 CPU 스케줄링 알고리즘

### 스케줄링 알고리즘의 종류

#### 선입 선처리 스케줄링 (FCFS Scheduling; First-Come-First-Served Scheduling)

- 단순히 준비 큐에 삽입된 순서대로 프로세스들을 처리하는 비선점형 스케줄링 방식
- CPU를 먼저 요청한 프로세스부터 CPU를 할당
- 프로세스들이 기다리는 시간이 매우 길어질 수 있음
- 호위 효과(convoy effect)
    - 대기 시간으로 인해 실행 시간이 비합리적으로 길어지는 것

#### 최단 작업 우선 스케줄링 (SJF Scheduling; Shorted Job First Scheduling)

- 준비 큐에 삽입된 프로세스들 중 CPU 이용 시간의 길이가 가장 짧은 프로세스부터 실행하는 비선점형 스케줄링 방식

#### 라운드 로빈 스케줄링 (Round Robin Scheduling)

- 스케줄링에 각 프로세스가 CPU를 사용할 수 있는 정해진 시간인 타임 슬라이스 개념을 더한 것
- 모든 프로세스들이 타임 슬라이스만큼의 정해진 시간 동안 돌아가며 CPU를 이용하는 선점형 스케줄링 방식
    - 타임 슬라이스가 지나치게 크면 선입 선처리 스케줄링처럼 호위 효과가 발생할 수 있음

#### 최소 잔여 시간 우선 스케줄링 (SRT Scheduling; Shortest Remaining Time Scheduling)

- 정해진 타임 슬라이스만큼 CPU를 사용하되, 다음 프로세스로는 남아있는 작업 시간이 가장 적은 프로세스가 선택됨

#### 우선순위 스케줄링 (Priority Scheduling)

- 프로세스들에 우선순위를 부여하고, 가장 높은 우선순위를 가진 프로세스부터 실행하는 방식
- 기아 현상(starvation)
    - 우선순위가 낮은 프로세스는 우선순위가 높은 프로세스들에 의해 실행이 계획해서 연기됨
- 에이징(ageing)
    - 오랫동안 대기한 프로세스의 우선순위를 점차 높이는 방식

#### 다단계 큐 스케줄링 (Multilevel Queue Scheduling)

- 우선순위별로 준비 큐를 여러 개 사용
- 큐마다 다른 스케줄링 알고리즘을 사용할 수 있음

#### 다단계 피드백 큐 스케줄링 (Multilevel Feedback Queue Scheduling)

- 프로세스가 해당 큐에서 실행이 끝나지 않느다면 다음 우선순위 큐에 삽입
- CPU를 비교적 오래 사용해야 하는 CPU 집중 프로세스들은 우선순위가 낮아지고, 입출력 집중 프로세스들은 우선순위가 높아짐
- 가장 일반적인 CPU 스케줄링 알고리즘